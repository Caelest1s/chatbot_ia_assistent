# ============================================================
# ğŸš€ CI/CD PIPELINE â€” GUIA COMPLETO (comentado)
# ============================================================
# Este arquivo define um pipeline de integraÃ§Ã£o contÃ­nua (CI)
# para seu projeto Python com testes unitÃ¡rios, integraÃ§Ã£o
# e anÃ¡lise de qualidade de cÃ³digo (lint).

# âœ… CI (Continuous Integration): garante que todo push/pull request
# passe por testes automÃ¡ticos antes de ser integrado.
# ============================================================

# name: CI Pipeline
# ------------------------------------------------------------
# Define o nome que aparecerÃ¡ no GitHub Actions.
# VocÃª verÃ¡ este nome na aba "Actions" do repositÃ³rio.
# ------------------------------------------------------------

# on:
#   push:
#     branches: [ "main", "dev" ]
#   pull_request:
#     branches: [ "main", "dev" ]
# ------------------------------------------------------------
# ğŸ”¹ Define os gatilhos (triggers) do pipeline:
# - Roda automaticamente quando houver:
#   â†’ push (commit enviado) para main ou dev
#   â†’ pull_request (solicitaÃ§Ã£o de merge)
# ------------------------------------------------------------
# ğŸ’¡ Dica: se quiser testar manualmente, adicione:
# workflow_dispatch:  (permite clicar em â€œRun workflowâ€ no GitHub)
# ------------------------------------------------------------

# jobs:
#   build-and-test:
#     runs-on: ubuntu-latest
# ------------------------------------------------------------
# ğŸ”¹ Define o *job principal*, chamado "build-and-test".
# Ele roda em uma mÃ¡quina virtual Linux (Ubuntu).
# ------------------------------------------------------------

#     services:
#       postgres:
#         image: postgres:16
#         env:
#           POSTGRES_USER: postgres
#           POSTGRES_PASSWORD: postgres
#           POSTGRES_DB: test_db
#         ports: ['5432:5432']
#         options: >-
#           --health-cmd="pg_isready -U postgres"
#           --health-interval=10s
#           --health-timeout=5s
#           --health-retries=5
# ------------------------------------------------------------
# ğŸ—„ï¸ Define um container PostgreSQL para testes de integraÃ§Ã£o.
# - Cria um banco de testes isolado na pipeline.
# - Ã‰ acessado pelo cÃ³digo atravÃ©s das variÃ¡veis abaixo.
# ------------------------------------------------------------

#     env:
#       DB_HOST: localhost
#       DB_USER: postgres
#       DB_PASSWORD: postgres
#       DB_PORT: 5432
#       DATABASE: test_db
#       OPENAI_API_KEY: fake_key
#       TELEGRAM_API_KEY: fake_key
# ------------------------------------------------------------
# ğŸŒ Define as variÃ¡veis de ambiente disponÃ­veis durante o job.
# - Aqui vocÃª simula as chaves necessÃ¡rias, como se fosse local.
# ------------------------------------------------------------
# ğŸ’¡ Em produÃ§Ã£o, use GitHub Secrets (Settings â†’ Secrets â†’ Actions)
#   e troque por:  ${{ secrets.OPENAI_API_KEY }}
# ------------------------------------------------------------

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4
# ------------------------------------------------------------
# ğŸ§¾ Passo 1 â€” Clona o repositÃ³rio para a mÃ¡quina virtual
# ------------------------------------------------------------

#       - name: Set up Python
#         uses: actions/setup-python@v5
#         with:
#           python-version: "3.11"
# ------------------------------------------------------------
# ğŸ Passo 2 â€” Instala o Python 3.11 no ambiente de build
# ------------------------------------------------------------

#       - name: Install dependencies
#         run: |
#           python -m pip install --upgrade pip
#           pip install -r requirements.txt
#           pip install pytest pytest-asyncio
# ------------------------------------------------------------
# ğŸ“¦ Passo 3 â€” Instala dependÃªncias do projeto e de testes
# ------------------------------------------------------------

#       - name: Run unit tests
#         run: pytest tests/unit -v --maxfail=1 --disable-warnings
# ------------------------------------------------------------
# ğŸ§ª Passo 4 â€” Executa todos os testes unitÃ¡rios
#   - "--maxfail=1": para ao primeiro erro
#   - "--disable-warnings": oculta avisos desnecessÃ¡rios
# ------------------------------------------------------------

#       - name: Run integration tests
#         run: pytest tests/integration -v --maxfail=1 --disable-warnings
# ------------------------------------------------------------
# ğŸ”— Passo 5 â€” Executa os testes de integraÃ§Ã£o
# ------------------------------------------------------------

#       - name: Run lint
#         run: |
#           pip install flake8
#           flake8 src tests --max-line-length=100
# ------------------------------------------------------------
# ğŸ§¹ Passo 6 â€” AnÃ¡lise de qualidade (Lint)
# - Verifica se o cÃ³digo segue padrÃµes de estilo (PEP8)
# ------------------------------------------------------------

# ============================================================
# ğŸ’¬ COMO USAR ESTE ARQUIVO:
# ============================================================
# 1ï¸âƒ£ Para estudar â€” deixe tudo comentado
# 2ï¸âƒ£ Para ativar o pipeline â€” remova os '#' das linhas
#     que desejar testar.
#     Exemplo: primeiro ative sÃ³ os testes unitÃ¡rios.
# 3ï¸âƒ£ Para executar manualmente â€” adicione:

# on:
#   workflow_dispatch:

# e rode pela aba "Actions" do GitHub.
# ============================================================
